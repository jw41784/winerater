<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WineRater | Your Personal Wine Journal</title>
    <meta name="description" content="Track and rate your wine experiences with WineRater, your personal wine journal">
    <link rel="stylesheet" href="styles-new.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Raleway:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="manifest" href="site.webmanifest">
    <meta name="theme-color" content="#8B0000">
</head>
<body>
    <div class="app-container">
        <header>
            <div class="logo">
                <i class="fas fa-wine-glass-alt"></i>
                <h1>WineRater</h1>
            </div>
            <nav>
                <ul>
                    <li class="active" data-view="dashboard"><i class="fas fa-chart-line"></i> Dashboard</li>
                    <li data-view="add-wine"><i class="fas fa-plus-circle"></i> Add Wine</li>
                    <li data-view="my-collection"><i class="fas fa-wine-bottle"></i> My Collection</li>
                </ul>
            </nav>
        </header>

        <main>
            <!-- Dashboard View -->
            <section id="dashboard" class="view active">
                <div class="dashboard-welcome">
                    <h2>Welcome to WineRater</h2>
                    <p>Your personal wine journey starts here. Keep track of your wine experiences, rate them, and build your collection over time. Use the navigation above to add new wines or browse your collection.</p>
                </div>
                
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <i class="fas fa-wine-bottle"></i>
                        <h3>Total Wines</h3>
                        <p id="total-wines">0</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-star"></i>
                        <h3>Average Rating</h3>
                        <p id="avg-rating">0.0</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-leaf"></i>
                        <h3>Top Variety</h3>
                        <p id="top-variety">None</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-map-marker-alt"></i>
                        <h3>Top Region</h3>
                        <p id="top-region">None</p>
                    </div>
                </div>
                
                <div class="top-wines">
                    <div class="section-header">
                        <h2>Your Top Rated Wines</h2>
                    </div>
                    <div id="top-wines-list" class="wine-grid">
                        <!-- Top wines will be dynamically added here -->
                        <div class="empty-collection" id="empty-top-wines">
                            <i class="fas fa-star"></i>
                            <h3>No rated wines yet</h3>
                            <p>Your highest-rated wines will appear here once you start adding ratings.</p>
                            <button class="btn primary" onclick="document.querySelector('[data-view=add-wine]').click()">Add Your First Wine</button>
                        </div>
                    </div>
                </div>
                
                <div class="recent-wines">
                    <div class="section-header">
                        <h2>Recently Added</h2>
                    </div>
                    <div id="recent-wines-list" class="wine-grid">
                        <!-- Recent wines will be dynamically added here -->
                        <div class="empty-collection" id="empty-recent-wines">
                            <i class="fas fa-clock"></i>
                            <h3>No wines in your collection</h3>
                            <p>Your recently added wines will appear here once you start building your collection.</p>
                            <button class="btn primary" onclick="document.querySelector('[data-view=add-wine]').click()">Add Your First Wine</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Add Wine View -->
            <section id="add-wine" class="view">
                <div class="section-header">
                    <h2>Add New Wine</h2>
                </div>
                
                <form id="wine-form">
                    <div class="form-group">
                        <label for="wine-name">Wine Name</label>
                        <input type="text" id="wine-name" placeholder="Enter the wine name" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="wine-winery">Winery</label>
                            <input type="text" id="wine-winery" placeholder="Enter winery name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="wine-vintage">Vintage</label>
                            <input type="number" id="wine-vintage" min="1900" max="2099" placeholder="Year (e.g. 2018)" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="wine-type">Type</label>
                            <select id="wine-type" required>
                                <option value="">Select Wine Type</option>
                                <option value="Red">Red</option>
                                <option value="White">White</option>
                                <option value="Rosé">Rosé</option>
                                <option value="Sparkling">Sparkling</option>
                                <option value="Dessert">Dessert</option>
                                <option value="Fortified">Fortified</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="wine-varietal">Varietal</label>
                            <input type="text" id="wine-varietal" placeholder="e.g. Cabernet Sauvignon, Chardonnay" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="wine-region">Region</label>
                            <input type="text" id="wine-region" placeholder="e.g. Napa Valley, Bordeaux" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="wine-country">Country</label>
                            <input type="text" id="wine-country" placeholder="e.g. United States, France" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="wine-price">Price</label>
                        <input type="number" id="wine-price" min="0" step="0.01" placeholder="Enter price in USD" required>
                    </div>
                    
                    <div class="rating-section">
                        <h3>Rate Your Wine Experience</h3>
                        
                        <div class="rating-group">
                            <label>Aroma</label>
                            <div class="star-rating" data-rating-type="aroma">
                                <i class="far fa-star" data-value="1"></i>
                                <i class="far fa-star" data-value="2"></i>
                                <i class="far fa-star" data-value="3"></i>
                                <i class="far fa-star" data-value="4"></i>
                                <i class="far fa-star" data-value="5"></i>
                            </div>
                        </div>
                        
                        <div class="rating-group">
                            <label>Taste</label>
                            <div class="star-rating" data-rating-type="taste">
                                <i class="far fa-star" data-value="1"></i>
                                <i class="far fa-star" data-value="2"></i>
                                <i class="far fa-star" data-value="3"></i>
                                <i class="far fa-star" data-value="4"></i>
                                <i class="far fa-star" data-value="5"></i>
                            </div>
                        </div>
                        
                        <div class="rating-group">
                            <label>Body</label>
                            <div class="star-rating" data-rating-type="body">
                                <i class="far fa-star" data-value="1"></i>
                                <i class="far fa-star" data-value="2"></i>
                                <i class="far fa-star" data-value="3"></i>
                                <i class="far fa-star" data-value="4"></i>
                                <i class="far fa-star" data-value="5"></i>
                            </div>
                        </div>
                        
                        <div class="rating-group">
                            <label>Finish</label>
                            <div class="star-rating" data-rating-type="finish">
                                <i class="far fa-star" data-value="1"></i>
                                <i class="far fa-star" data-value="2"></i>
                                <i class="far fa-star" data-value="3"></i>
                                <i class="far fa-star" data-value="4"></i>
                                <i class="far fa-star" data-value="5"></i>
                            </div>
                        </div>
                        
                        <div class="rating-group">
                            <label>Value</label>
                            <div class="star-rating" data-rating-type="value">
                                <i class="far fa-star" data-value="1"></i>
                                <i class="far fa-star" data-value="2"></i>
                                <i class="far fa-star" data-value="3"></i>
                                <i class="far fa-star" data-value="4"></i>
                                <i class="far fa-star" data-value="5"></i>
                            </div>
                        </div>
                        
                        <div class="overall-rating">
                            <label>Overall Rating</label>
                            <span id="overall-rating-display">0.0</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="wine-notes">Tasting Notes</label>
                        <textarea id="wine-notes" rows="5" placeholder="Describe your experience with this wine. Note the aromas, flavors, and any other impressions."></textarea>
                    </div>
                    
                    <div class="form-group image-upload">
                        <label for="wine-image">Wine Label Image</label>
                        <input type="file" id="wine-image" accept="image/*">
                        <div id="image-preview" class="hidden"></div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn primary">Save Wine</button>
                        <button type="reset" class="btn secondary">Reset</button>
                    </div>
                </form>
            </section>

            <!-- My Collection View -->
            <section id="my-collection" class="view">
                <div class="section-header">
                    <h2>My Wine Collection</h2>
                </div>
                
                <div class="collection-filters">
                    <div class="search">
                        <input type="text" id="collection-search" placeholder="Search wines...">
                    </div>
                    
                    <div class="filters">
                        <select id="type-filter">
                            <option value="all">All Types</option>
                            <option value="Red">Red</option>
                            <option value="White">White</option>
                            <option value="Rosé">Rosé</option>
                            <option value="Sparkling">Sparkling</option>
                            <option value="Dessert">Dessert</option>
                            <option value="Fortified">Fortified</option>
                        </select>
                        
                        <select id="sort-by">
                            <option value="date">Date Added (Newest)</option>
                            <option value="rating">Rating (High to Low)</option>
                            <option value="name">Name (A-Z)</option>
                            <option value="vintage">Vintage (New to Old)</option>
                            <option value="price">Price (Low to High)</option>
                        </select>
                    </div>
                </div>
                
                <div id="collection-list" class="wine-grid">
                    <!-- Wines will be dynamically added here -->
                    <div class="empty-collection" id="empty-collection">
                        <i class="fas fa-wine-glass-alt"></i>
                        <h3>Your collection is empty</h3>
                        <p>Start building your wine collection by adding wines you've tried.</p>
                        <button class="btn primary" onclick="document.querySelector('[data-view=add-wine]').click()">Add Your First Wine</button>
                    </div>
                </div>
            </section>

            <!-- Wine Details Modal -->
            <div id="wine-details-modal" class="modal">
                <div class="modal-content">
                    <span class="close-modal"><i class="fas fa-times"></i></span>
                    <div id="wine-details-content">
                        <!-- Wine details will be dynamically added here -->
                    </div>
                </div>
            </div>
            
            <!-- Toast Notifications -->
            <div class="toast-container" id="toast-container">
                <!-- Toasts will be dynamically added here -->
            </div>
        </main>

        <footer>
            <p>&copy; 2025 WineRater. Your personal wine journey, one glass at a time.</p>
        </footer>
    </div>

    <script src="app-new.js"></script>
    <script>
        // Register Service Worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(error => {
                        console.log('ServiceWorker registration failed: ', error);
                    });
            });
        }
    </script>
</body>
</html>